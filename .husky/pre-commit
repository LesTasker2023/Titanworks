#!/bin/sh

# Stage all changes automatically (mechanical formatting & lint fixes first)
echo "ğŸ¯ Auto-staging all changes..."
git add .

echo "ğŸ§¹ Running lint-staged..."
yarn lint-staged || exit 1

echo "ğŸ“œ Ensuring changelog updated if runtime changes present..."
yarn ensure:changelog || exit 1

echo "ğŸ›¡  Type checking..."
yarn type-check || exit 1

echo "ğŸ§ª Running full test suite (may take ~15s)..."
yarn test:run || exit 1

echo "âœ… Pre-commit checks passed."
